# Sentinel's Journal

## 2026-01-17 - Denial of Service via Slow Connections **Vulnerability:** The service was vulnerable to a Denial of Service (DoS) attack where a single client could monopolize the server by keeping a connection open and sending data slowly (Slowloris-style), or just idling within the per-packet timeout window. Since the server is single-threaded, this blocked all other clients. **Learning:** In single-threaded synchronous servers, per-packet timeouts (`socket.settimeout`) are insufficient to prevent resource exhaustion/blocking if the client sends data just fast enough to satisfy the timeout but slow enough to hold the connection for a long time. **Prevention:** Enforce a strict "Total Duration" limit (`MAX_CONNECTION_DURATION`) for each transaction. If the transaction takes longer than X seconds, forcefully close the connection. This ensures availability for other clients.
