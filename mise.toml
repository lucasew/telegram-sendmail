[tools]
go = "1.23.4"

[tasks.ci]
description = "Run CI checks"
depends = ["install", "fmt", "lint", "test", "build"]

[tasks.install]
description = "Install dependencies"
run = "echo 'Using vendored dependencies'"

[tasks.fmt]
description = "Check formatting"
run = "test -z $(gofmt -l .)"

[tasks.lint]
description = "Run linter"
run = "go vet ./..."

[tasks.test]
description = "Run tests"
run = "go test -v ./..."

[tasks.build]
description = "Build binary"
run = "go build -o telegram-sendmail ./cmd/telegram-sendmail"

[tasks."codegen:vendor"]
description = "Update vendor directory"
run = "go mod tidy && go mod vendor"
